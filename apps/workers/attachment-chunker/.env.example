# =============================================================================
# Attachment Chunker Worker Environment Variables
# =============================================================================
# Copy this file to .env and fill in the values

# -----------------------------------------------------------------------------
# Datadog Unified Service Tagging
# -----------------------------------------------------------------------------
DD_ENV=local
DD_SERVICE=attachment-chunker
DD_VERSION=0.1.0

# -----------------------------------------------------------------------------
# Lattice Custom Tags
# -----------------------------------------------------------------------------
LATTICE_TEAM=platform
LATTICE_CLOUD=local
LATTICE_REGION=local
LATTICE_DOMAIN=mail
LATTICE_STAGE=chunk

# -----------------------------------------------------------------------------
# Kafka Configuration
# -----------------------------------------------------------------------------
KAFKA_BROKERS=localhost:9092
KAFKA_CLIENT_ID=attachment-chunker-local
KAFKA_GROUP_ID=attachment-chunker-local
KAFKA_TOPIC_IN=lattice.mail.attachment.extracted.v1
KAFKA_TOPIC_OUT=lattice.mail.chunk.v1
KAFKA_TOPIC_DLQ=lattice.dlq.mail.attachment.chunk.v1

# Optional: For Confluent Cloud
# KAFKA_SASL_USERNAME=your-api-key
# KAFKA_SASL_PASSWORD=your-api-secret

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://lattice:lattice_dev_password@localhost:5432/lattice  # pragma: allowlist secret

# -----------------------------------------------------------------------------
# Chunking Configuration
# -----------------------------------------------------------------------------
# Target tokens per chunk
CHUNK_TARGET_TOKENS=400
# Overlap tokens between chunks
CHUNK_OVERLAP_TOKENS=50
# Maximum tokens per chunk
CHUNK_MAX_TOKENS=512
# Chunking algorithm version
CHUNKING_VERSION=v1
# Text normalization version
NORMALIZATION_VERSION=v1

# -----------------------------------------------------------------------------
# Worker Configuration
# -----------------------------------------------------------------------------
# Maximum retries before sending to DLQ
KAFKA_MAX_RETRIES=3

# Retry backoff in milliseconds
KAFKA_RETRY_BACKOFF_MS=1000

# -----------------------------------------------------------------------------
# Health Check Configuration
# -----------------------------------------------------------------------------
HEALTH_PORT=3000

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Log level: debug, info, warn, error
LOG_LEVEL=info

# Pretty print logs (set to false in production)
LOG_PRETTY=true
