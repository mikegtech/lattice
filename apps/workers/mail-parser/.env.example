# =============================================================================
# Mail Parser Worker Environment Variables
# =============================================================================
# Copy this file to .env and fill in the values

# -----------------------------------------------------------------------------
# Datadog Unified Service Tagging
# -----------------------------------------------------------------------------
DD_ENV=local
DD_SERVICE=mail-parser
DD_VERSION=0.1.0

# -----------------------------------------------------------------------------
# Lattice Custom Tags
# -----------------------------------------------------------------------------
LATTICE_TEAM=platform
LATTICE_CLOUD=local
LATTICE_REGION=local
LATTICE_DOMAIN=mail
LATTICE_STAGE=parse

# -----------------------------------------------------------------------------
# Kafka Configuration
# -----------------------------------------------------------------------------
KAFKA_BROKERS=localhost:9092
KAFKA_CLIENT_ID=mail-parser-local
KAFKA_GROUP_ID=mail-parser-local
KAFKA_TOPIC_IN=lattice.mail.raw.v1
KAFKA_TOPIC_OUT=lattice.mail.parse.v1
KAFKA_TOPIC_DLQ=lattice.dlq.mail.parse.v1
# Topic for attachment extraction requests (sent to mail-extractor)
KAFKA_TOPIC_ATTACHMENT=lattice.mail.attachment.v1

# Optional: For Confluent Cloud
# KAFKA_SASL_USERNAME=your-api-key
# KAFKA_SASL_PASSWORD=your-api-secret

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/lattice

# -----------------------------------------------------------------------------
# Worker Configuration
# -----------------------------------------------------------------------------
# Number of messages to process concurrently
WORKER_CONCURRENCY=10

# Maximum retries before sending to DLQ
WORKER_MAX_RETRIES=3

# Commit interval in milliseconds (0 = commit after each message)
WORKER_COMMIT_INTERVAL_MS=5000

# -----------------------------------------------------------------------------
# Health Check Configuration
# -----------------------------------------------------------------------------
HEALTH_PORT=3000

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Log level: debug, info, warn, error
LOG_LEVEL=info

# Pretty print logs (set to false in production)
LOG_PRETTY=true
