# =============================================================================
# Mail Extractor Worker Environment Variables
# =============================================================================
# Copy this file to .env and fill in the values

# -----------------------------------------------------------------------------
# Datadog Unified Service Tagging
# -----------------------------------------------------------------------------
DD_ENV=local
DD_SERVICE=mail-extractor
DD_VERSION=0.1.0

# -----------------------------------------------------------------------------
# Lattice Custom Tags
# -----------------------------------------------------------------------------
LATTICE_TEAM=platform
LATTICE_CLOUD=local
LATTICE_REGION=local
LATTICE_DOMAIN=mail
LATTICE_STAGE=extract

# -----------------------------------------------------------------------------
# Kafka Configuration
# -----------------------------------------------------------------------------
KAFKA_BROKERS=localhost:9092
KAFKA_CLIENT_ID=mail-extractor-local
KAFKA_GROUP_ID=mail-extractor-local
KAFKA_TOPIC_IN=lattice.mail.attachment.v1
KAFKA_TOPIC_OUT=lattice.mail.attachment.extracted.v1
KAFKA_TOPIC_DLQ=lattice.dlq.mail.attachment.v1
KAFKA_SSL=false

# Optional: For Confluent Cloud
# KAFKA_SASL_MECHANISM=plain
# KAFKA_SASL_USERNAME=your-api-key
# KAFKA_SASL_PASSWORD=your-api-secret

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://lattice:lattice_dev_password@localhost:5432/lattice # pragma: allowlist secret

# -----------------------------------------------------------------------------
# MinIO/S3 Configuration
# -----------------------------------------------------------------------------
MINIO_ENDPOINT=http://localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
AWS_REGION=us-east-1
S3_FORCE_PATH_STYLE=true

# -----------------------------------------------------------------------------
# Worker Configuration
# -----------------------------------------------------------------------------
# Maximum retries before sending to DLQ
KAFKA_MAX_RETRIES=3

# Retry backoff in milliseconds
KAFKA_RETRY_BACKOFF_MS=1000

# -----------------------------------------------------------------------------
# Health Check Configuration
# -----------------------------------------------------------------------------
HEALTH_PORT=3007

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Log level: debug, info, warn, error
LOG_LEVEL=info

# Pretty print logs (set to false in production)
LOG_PRETTY=true
