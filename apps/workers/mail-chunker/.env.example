# =============================================================================
# Mail Chunker Worker Environment Variables
# =============================================================================
# Copy this file to .env and fill in the values

# -----------------------------------------------------------------------------
# Datadog Unified Service Tagging
# -----------------------------------------------------------------------------
DD_ENV=local
DD_SERVICE=lattice-worker-mail-chunker
DD_VERSION=0.1.0

# -----------------------------------------------------------------------------
# Lattice Custom Tags
# -----------------------------------------------------------------------------
LATTICE_TEAM=platform
LATTICE_CLOUD=local
LATTICE_REGION=local
LATTICE_DOMAIN=mail
LATTICE_STAGE=chunk

# -----------------------------------------------------------------------------
# Kafka Configuration
# -----------------------------------------------------------------------------
KAFKA_BROKERS=localhost:9092
KAFKA_CLIENT_ID=mail-chunker-local
KAFKA_CONSUMER_GROUP=mail-chunker-local
KAFKA_INPUT_TOPIC=lattice.mail.parse.v1
KAFKA_OUTPUT_TOPIC=lattice.mail.chunk.v1
KAFKA_DLQ_TOPIC=lattice.dlq.mail.chunk.v1

# Optional: For Confluent Cloud
# KAFKA_SASL_USERNAME=your-api-key
# KAFKA_SASL_PASSWORD=your-api-secret

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/lattice  # pragma: allowlist secret

# -----------------------------------------------------------------------------
# Worker Configuration
# -----------------------------------------------------------------------------
WORKER_CONCURRENCY=10
WORKER_MAX_RETRIES=3
WORKER_COMMIT_INTERVAL_MS=5000

# -----------------------------------------------------------------------------
# Chunking Configuration
# -----------------------------------------------------------------------------
# Target chunk size in tokens (350-450 recommended for embeddings)
CHUNK_TARGET_TOKENS=400
# Overlap between chunks in tokens
CHUNK_OVERLAP_TOKENS=50
# Maximum chunk size (hard limit)
CHUNK_MAX_TOKENS=512
# Chunking algorithm version (for idempotency)
CHUNKING_VERSION=v1
# Normalization algorithm version (for idempotency)
NORMALIZATION_VERSION=v1

# -----------------------------------------------------------------------------
# Health Check Configuration
# -----------------------------------------------------------------------------
HEALTH_PORT=3001

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
LOG_LEVEL=info
LOG_PRETTY=true
